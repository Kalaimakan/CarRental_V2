@model CarRental.ViewModels.PaymentViewModel

<div class="container d-flex justify-content-center mt-5">
    <div class="card p-4 shadow-lg" style="width: 400px;">
        <h4 class="mb-3">Payment</h4>

        <div class="mb-3">
            <strong>Car:</strong> @Model.CarModel <br />
            <strong>Dates:</strong> @Model.Dates <br />
            <strong>Total:</strong> $@Model.Total
        </div>

        <form asp-action="Payment" method="post">
            <input type="hidden" asp-for="BookingId" />

            <!-- Payment Method -->
            <div class="mb-3">
                <label class="fw-bold">Payment Method</label><br />
                <input type="radio" name="Method" value="CreditDebit" checked /> Credit/Debit Card <br />
                <input type="radio" name="Method" value="PayPal" /> PayPal <br />
                <input type="radio" name="Method" value="Cash" /> Cash <br />
            </div>

            <!-- Credit/Debit Card Section -->
            <div id="card-section">
                <div class="mb-3">
                    <label>Cardholder Name</label>
                    <input asp-for="CardHolder" class="form-control" />
                </div>

                <div class="mb-3">
                    <label>Card Number</label>
                    <input asp-for="CardNumber" class="form-control" />
                </div>

                <div class="mb-3">
                    <label>CVV</label>
                    <input asp-for="CVV" class="form-control" />
                </div>
            </div>

            <!-- PayPal Section -->
            <div id="paypal-section" style="display:none;">
                <div class="mb-3">
                    <label>PayPal Email</label>
                    <input type="email" name="PayPalEmail" class="form-control" placeholder="example@paypal.com" />
                </div>
            </div>

            <!-- Cash Section -->
            <div id="cash-section" style="display:none;">
                <div class="alert alert-info p-2">
                    Please pay cash at the counter when picking up the car.
                </div>
            </div>

            <button type="submit" class="btn btn-success w-100">Pay Now</button>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        document.querySelectorAll("input[name='Method']").forEach(radio => {
            radio.addEventListener("change", function () {
                document.getElementById("card-section").style.display = (this.value === "CreditDebit") ? "block" : "none";
                document.getElementById("paypal-section").style.display = (this.value === "PayPal") ? "block" : "none";
                document.getElementById("cash-section").style.display = (this.value === "Cash") ? "block" : "none";
            });
        });
    </script>
}
