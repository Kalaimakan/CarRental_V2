@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Reports";
}

<div class="reports-container">
    <!-- Heading -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">Reports</h2>
        <span class="text-muted">Generated on: @DateTime.Now.ToString("MMM dd, yyyy")</span>
    </div>

    <!-- Report Summary Cards -->
    <div class="row g-4 mb-5">
        <div class="col-md-3">
            <div class="report-card sales-card fade-in">
                <i class="bi bi-bar-chart-line-fill icon"></i>
                <h4>Total Sales</h4>
                <p>$120,500</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="report-card bookings-card fade-in">
                <i class="bi bi-journal-bookmark-fill icon"></i>
                <h4>Total Bookings</h4>
                <p>3,245</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="report-card revenue-card fade-in">
                <i class="bi bi-currency-dollar icon"></i>
                <h4>Revenue</h4>
                <p>$98,300</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="report-card customers-card fade-in">
                <i class="bi bi-people-fill icon"></i>
                <h4>Customers</h4>
                <p>1,120</p>
            </div>
        </div>
    </div>

    <!-- Filters -->
    <div class="card shadow-sm p-3 mb-4 fade-in">
        <form class="row g-3">
            <div class="col-md-3">
                <label class="form-label">From Date</label>
                <input type="date" class="form-control" />
            </div>
            <div class="col-md-3">
                <label class="form-label">To Date</label>
                <input type="date" class="form-control" />
            </div>
            <div class="col-md-3">
                <label class="form-label">Car Type</label>
                <select class="form-select">
                    <option>All</option>
                    <option>SUV</option>
                    <option>Sedan</option>
                    <option>Hatchback</option>
                </select>
            </div>
            <div class="col-md-3 d-flex align-items-end">
                <button class="btn btn-primary w-100">Apply</button>
            </div>
        </form>
    </div>

    <!-- Charts -->
    <div class="row g-4">
        <div class="col-md-6">
            <div class="card shadow-sm p-3 fade-in">
                <h5>Monthly Revenue</h5>
                <canvas id="monthlyRevenueChart"></canvas>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card shadow-sm p-3 fade-in">
                <h5>Top 5 Customers</h5>
                <canvas id="topCustomersChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Table -->
    <div class="card shadow-sm mt-4 p-3 fade-in">
        <h5>Detailed Report</h5>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Booking ID</th>
                    <th>Customer</th>
                    <th>Car</th>
                    <th>Amount</th>
                    <th>Payment Method</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>B001</td>
                    <td>John Doe</td>
                    <td>SUV</td>
                    <td>$200</td>
                    <td>Credit Card</td>
                    <td>2025-09-15</td>
                </tr>
                <tr>
                    <td>B002</td>
                    <td>Sarah Lee</td>
                    <td>Sedan</td>
                    <td>$180</td>
                    <td>PayPal</td>
                    <td>2025-09-14</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<style>
    .reports-container {
        padding: 30px;
    }

    .report-card {
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.6);
        color: #fff;
    }

        .report-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.8);
        }

        .report-card .icon {
            font-size: 40px;
            margin-bottom: 15px;
            color: #fff;
        }

        .report-card h4 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .report-card p {
            font-size: 1.5rem;
            font-weight: bold;
        }

    /* Gradient card backgrounds */
    .sales-card {
        background: linear-gradient(135deg, #2563eb, #3b82f6);
    }

    .bookings-card {
        background: linear-gradient(135deg, #9333ea, #a855f7);
    }

    .revenue-card {
        background: linear-gradient(135deg, #047857, #10b981);
    }

    .customers-card {
        background: linear-gradient(135deg, #b45309, #f59e0b);
    }

    /* Fade-in with transition */
    .fade-in {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.8s ease, transform 0.8s ease;
    }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

    /* Card hover effect */
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.4);
        transition: all 0.4s ease;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Staggered fade-in
    document.addEventListener("DOMContentLoaded", () => {
        const fadeEls = document.querySelectorAll('.fade-in');
        fadeEls.forEach((el, index) => {
            setTimeout(() => {
                el.classList.add('visible');
            }, 100 * index);
        });
    });

    // Monthly Revenue Chart
    const revenueCtx = document.getElementById('monthlyRevenueChart').getContext('2d');
    new Chart(revenueCtx, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug'],
            datasets: [{
                label: 'Revenue ($)',
                data: [10500, 12500, 9800, 14200, 15800, 17600, 18900, 20500],
                borderColor: '#3b82f6',
                backgroundColor: 'rgba(59,130,246,0.3)',
                borderWidth: 3,
                tension: 0.4,
                fill: true,
                pointRadius: 5,
                pointHoverRadius: 10,
                pointHoverBorderWidth: 2,
                animation: {
                    duration: 1500,
                    easing: 'easeOutQuart'
                }
            }]
        },
        options: {
            responsive: true,
            plugins: { legend: { labels: { color: '#333' } } },
            interaction: { mode: 'index', intersect: false },
            hover: { mode: 'nearest' },
            scales: {
                x: { ticks: { color: '#333' }, grid: { color: '#ccc' } },
                y: { ticks: { color: '#333' }, grid: { color: '#ccc' } }
            }
        }
    });

    // Top Customers Doughnut Chart
    const customersCtx = document.getElementById('topCustomersChart').getContext('2d');
    new Chart(customersCtx, {
        type: 'doughnut',
        data: {
            labels: ['John', 'Sarah', 'Mark', 'Emma', 'David'],
            datasets: [{
                data: [35, 25, 20, 10, 10],
                backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#a855f7', '#ef4444'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { labels: { color: '#333', font: { size: 14 } } }
            },
            animation: {
                animateRotate: true,
                animateScale: true,
                duration: 1500
            }
        }
    });
</script>
